<!DOCTYPE html>
<html>
<head>
    <title>Manage Students</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
    <h2>ğŸ“ Manage Students</h2>
    <a href="/admin/dashboard" class="btn btn-secondary mb-3">ğŸ  Back to Dashboard</a>

    <!-- Filter Section -->
    <form method="GET" class="row g-3 mb-4">
        <div class="col-md-4">
            <label class="form-label">Filter by Department</label>
            <select name="department" class="form-select">
                <option value="">All</option>
                {% for dept in departments %}
                    <option value="{{ dept[1] }}" {% if selected_dept == dept[1] %}selected{% endif %}>{{ dept[1] }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="col-md-4">
            <label class="form-label">Filter by Year</label>
            <select name="year" class="form-select">
                <option value="">All</option>
                <option value="First" {% if selected_year == 'First' %}selected{% endif %}>First</option>
                <option value="Second" {% if selected_year == 'Second' %}selected{% endif %}>Second</option>
                <option value="Third" {% if selected_year == 'Third' %}selected{% endif %}>Third</option>
                <option value="Fourth" {% if selected_year == 'Fourth' %}selected{% endif %}>Fourth</option>
            </select>
        </div>

        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100">Apply Filters</button>
        </div>
    </form>

    <div class="mb-3">
        <a href="{{ url_for('admin_allot_semester') }}" class="btn btn-info">Allot Semester to Students</a>
    </div>

    <!-- Students Table -->
    <div class="card p-4">
        <h4>All Registered Students</h4>
        <table class="table table-bordered table-striped align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Name</th>
                    <th>Department</th>
                    <th>Student ID</th>
                    <th>Roll Number</th>
                    <th>Email</th>
                    <th>Year</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student['name'] }}</td>
                    <td>{{ student['department'] }}</td>
                    <td>{{ student['student_id'] }}</td>
                    <td>{{ student['roll_no'] }}</td>
                    <td>{{ student['email'] }}</td>
                    <td>{{ student['year'] }}</td>
                    <td>
                        <a href="/admin/edit-student/{{ student['id'] }}" class="btn btn-warning btn-sm">âœï¸ Edit</a>
                        <form action="{{ url_for('delete_student', student_id=student['id']) }}" method="POST" style="display:inline-block;" onsubmit="return confirm('Delete this student?');">
                            <button class="btn btn-danger btn-sm">ğŸ—‘ï¸ Delete</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</body>
</html>